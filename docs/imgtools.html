---

title: imgtools

keywords: fastai
sidebar: home_sidebar

summary: "Functions for handling images"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_imgtools.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="References">References<a class="anchor-link" href="#References">&#182;</a></h2><p>Functions <a href="imgtools.html#download_images"><code>download_images</code></a> and <a href="imgtools.html#verify_images"><code>verify_images</code></a> functions are based on the below sources. Please visit attached links for further understanding.</p>
<ul>
<li>fastai library by Jeremy Howard and contributors: <a href="https://docs.fast.ai/vision.data.html#Building-your-own-dataset">Building your own dataset documentation</a></li>
<li>Blog post by Mark Needham: <a href="https://markhneedham.com/blog/2018/07/15/python-parallel-download-files-requests/">Parallel download files using requests</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download">Download<a class="anchor-link" href="#Download">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_image" class="doc_header"><code>download_image</code><a href="https://github.com/yoke2/suptools/tree/master/suptools/imgtools.py#L18" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_image</code>(<strong><code>dest</code></strong>, <strong><code>url</code></strong>, <strong><code>timeout</code></strong>=<em><code>5</code></em>)</p>
</blockquote>
<p>Downloads an image from url to destination file path (pathlib.Path object).
Tries to detect and preserve original suffix and defaults to '.jpg' if none
Assigns a randomly generated filename to avoid name clashes.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Additional links on user agents to handle HTTP 406:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/56101612/python-requests-http-response-406">Python Requests HTTP Response 406</a></li>
<li><a href="https://www.whatismybrowser.com/detect/what-is-my-user-agent">Detect your user agent by whatismybrowser.com</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_images" class="doc_header"><code>download_images</code><a href="https://github.com/yoke2/suptools/tree/master/suptools/imgtools.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_images</code>(<strong><code>url_file_path</code></strong>, <strong><code>dest</code></strong>, <strong><code>n_threads</code></strong>=<em><code>4</code></em>, <strong><code>timeout</code></strong>=<em><code>5</code></em>)</p>
</blockquote>
<p>Downloads images from list of urls.
Makes use of multiprocessing library to support concurrent downloads if supported by CPU.
Visualizes progress using tqdm.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Verify">Verify<a class="anchor-link" href="#Verify">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="verify_image_tf" class="doc_header"><code>verify_image_tf</code><a href="https://github.com/yoke2/suptools/tree/master/suptools/imgtools.py#L65" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>verify_image_tf</code>(<strong><code>img_file</code></strong>)</p>
</blockquote>
<p>Verifies if an image can be opened by tf.image module
tf.image currently supports only BMP, JPEG, GIF and PNG.
Function attempts to convert non-supported formats to JPEG.
If the image cannot be opened or converted, it is deleted.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="verify_images" class="doc_header"><code>verify_images</code><a href="https://github.com/yoke2/suptools/tree/master/suptools/imgtools.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>verify_images</code>(<strong><code>file_path</code></strong>, <strong><code>n_threads</code></strong>=<em><code>4</code></em>, <strong><code>recurse</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Verifies images from file path.
Makes use of multiprocessing library to support concurrent verification if supported by CPU.
Visualizes progress using tqdm.</p>

</div>

</div>

</div>
</div>

</div>
</div>
 

